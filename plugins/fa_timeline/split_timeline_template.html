<!DOCTYPE html>
<html>
<head>
        <script src="/resources/jquery-1.11.3.min.js"></script>
        <script src="/resources/jquery-ui-1.11.4/jquery-ui.min.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="/resources/themes/default/easyui.css">
        <link rel="stylesheet" type="text/css" href="/resources/themes/icon.css">
        <link rel="stylesheet" type="text/css" href="/resources/themes/jquery.dataTables.min.css">
        <script type="text/javascript" src="/resources/jquery.easyui.min.js"></script>
        <script type="text/javascript" src="/resources/datagrid-detailview.js"></script>
<style>
    html{
        height: 100%;
    }
    body {
        min-height: 100%;
        margin: 0px;
    }
    .layout-body {
        overflow: hidden;
    }
    #timeline_frame {
        height: 99%;
        width: 100%;
        border: none;
    }
</style>
</head>
    <body>
        <div class="easyui-layout" style="width:100%;height:100%;">
            <div data-options="region:'north',split:true" style="height:300px">
                <table id="tl01" class="easyui-datagrid" style="width:100%;height:100%;" 
                    url="/plugins/<!-- Plugin -->/<!-- PID -->?mode=events<!-- Filter -->"
                    title="<!-- Title -->" sortName="<!-- Sort -->" sortOrder="desc" rownumbers="false" pagination="true" singleSelect="true">
                    <!-- Table -->
                </table>
            </div>
            <div data-options="region:'center'">
                <iframe name="timeline_frame" id="timeline_frame" target="self" src="<!-- Home -->"></iframe>
            </div>
        </div>
        <script type="text/javascript">
            function formatLinkUrl(val,row){
                if (row.meta_type == 'Directory') {
                    var url = '/plugins/<!-- Plugin -->/'+ row.pid + '<!-- Query -->';
                    return '<a href="'+url+'" target="_self"><!-- Title --></a>';
                }
                else {
                    var url = '/plugins/<!-- Children -->'+row.image_id+'/'+row.display_name.replace("TSK:", "TSK");
                    return '<a href="'+url+'" target="timeline_frame"><!-- Child --></a>';
                }
            }
            function formatThumbnail(val,row){
                var url = '/plugins/fa_thumbnail/'+row.image_id+'/'+row.display_name.replace("TSK:", "TSK");
                return '<img style="height:32px;width:32px;" src="'+url+'" alt="Thumbnail">';
            }
            /* $(function(){
                $('#tl01').datagrid({
                    view: detailview,
                    detailFormatter:function(index,row){
                        return '<div class="ddv" style="padding:2px 0"></div>';
                    },
                    onExpandRow: function(index,row){
                        var ddv = $(this).datagrid('getRowDetail',index).find('div.ddv');
                        ddv.panel({
                            height:600,
                            width:800,
                            border:false,
                            cache:false,
                            href:'/plugins/fa_blank/fa_analyze/'+row.image_id+'/'+row.display_name.replace("TSK:", "TSK"),
                            onLoad:function(){
                                $('#dg').datagrid('fixDetailRowHeight',index);
                            }
                        });
                        $('#dg').datagrid('fixDetailRowHeight',index);
                    }
                });
            }); */
        </script>
    </body>
</html>
