<!DOCTYPE html>
<html>
    <style>
    #nav {
        line-height:30px;
        height:100%;
        width:400px;
        float:left;
        padding:0px;          
    }
    #section {
        width:calc(100% - 420px);
        height:calc(100% - 10px);
        padding:0px;         
    }
    
    html{
        height: 100%;
    }

    body {
        min-height: 100%;
        margin: 0px;
    }
    
    ul.fancytree-container {
        width: 395px;
        height: 100%;
        float: left;
        overflow: auto !important;
        position: fixed;
        border: none !important;
        outline: none;
    }
    
    #tree_frame {
        position: absolute;
        height: 100%;
        width: 100%;
        border: none;
    }

    </style>
    <head>
        <script src="/resources/jquery-1.11.3.min.js"></script>
        <script src="/resources/jquery-ui-1.11.4/jquery-ui.min.js" type="text/javascript"></script>
        <!-- Include Fancytree skin and library -->
        <link href="/resources/fancytree/skin-lion/ui.fancytree.css" rel="stylesheet" type="text/css">
        <!--<link href="/resources/fa_regview.css" rel="stylesheet" type="text/css">-->
        <script src="/resources/fancytree/jquery.fancytree-all.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="/resources/themes/default/easyui.css">
        <link rel="stylesheet" type="text/css" href="/resources/themes/icon.css">
        <script type="text/javascript" src="/resources/jquery.easyui.min.js"></script>

        <script>
              $(function() {
            $('#tree').fancytree({
                source: { url: '/plugins/fa_filetree/<!-- Path -->/?mode=root' },
                autoScroll: true,
                init: function(event, data) {
                    data.tree.getFirstChild().setFocus();
                },
                focus: function(event, data){
                    data.node.scrollIntoView(true);
                },
                activate: function(event, data) {
                    node = data.node;
                    var url = '<!-- Child -->' + node.key + '<!-- Query -->'
                    document.getElementById('tree_frame').src = url 
                },
                lazyLoad: function(event, data) {
                    var node = data.node;
                    console.log(node);
                    // Issue an ajax request to load child nodes
                    data.result = {
                        url: "/plugins/fa_filetree/<!-- Path -->/",
                        data: {mode: "children", parent: node.key},
                    };
                }
            });
        });
        </script>
    </head>
    <body>
        <div class="easyui-layout" data-options="fit:true" style="width:100%;height:100%;">
            <div data-options="region:'west',hideCollapsedContent:false,split:true" title="<!-- Name -->" style="width:200px;">
                <div id="tree" class="registry-tree"></div>
            </div>
            <div data-options="region:'center',title:''">
                <iframe name="tree_frame" id="tree_frame" src="<!-- Home -->"></iframe>
            </div>
        </div>

    </body>
</html>

