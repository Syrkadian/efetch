<!DOCTYPE html>
<html>
    <style>
    #nav {
        line-height:30px;
        height:100%;
        width:400px;
        float:left;
        padding:0px;          
    }
    #section {
        width:calc(100% - 420px);
        height:calc(100% - 10px);
        padding:0px;         
    }

    ul.fancytree-container {
        width: 395px;
        height: 95vh;
        float: left;
        overflow: auto !important;
        position: fixed;
        border: none !important;
        outline: none;
    }
    
    #tree_frame {
        position: absolute;
        height: calc(100% - 10px);
        width: calc(100% - 420px);
        border: none;
    }

    </style>
    <head>
        <script src="/resources/jquery-1.11.3.min.js"></script>
        <script src="/resources/jquery-ui-1.11.4/jquery-ui.min.js" type="text/javascript"></script>
        <!-- Include Fancytree skin and library -->
        <link href="/resources/fancytree/skin-win8/ui.fancytree.css" rel="stylesheet" type="text/css">
        <!--<link href="/resources/fa_regview.css" rel="stylesheet" type="text/css">-->
        <script src="/resources/fancytree/jquery.fancytree-all.js" type="text/javascript"></script>
        <script>
              $(function() {
            $('#tree').fancytree({
                source: { url: '/plugins/fa_filetree/<!-- Path -->/?mode=root' },
                autoScroll: true,
                init: function(event, data) {
                    data.tree.getFirstChild().setFocus();
                },
                focus: function(event, data){
                    data.node.scrollIntoView(true);
                },
                activate: function(event, data) {
                    node = data.node;
                    var url = '<!-- Child -->' + node.key
                    document.getElementById('tree_frame').src = url 
                },
                lazyLoad: function(event, data) {
                    var node = data.node;
                    console.log(node);
                    // Issue an ajax request to load child nodes
                    data.result = {
                        url: "/plugins/fa_filetree/<!-- Path -->/",
                        data: {mode: "children", parent: node.key},
                    };
                }
            });
        });
        </script>
    </head>
    <body>
        <div id="nav" class="registry-container">
            <div id="tree" class="registry-tree"></div>
            <div id="values" class="registry-values"></div>
        </div>

        <div id="section">
            <iframe name="tree_frame" id="tree_frame" src="<!-- Home -->"></iframe>
        </div>
    </body>
</html>
