<!DOCTYPE html>
<html>
<head>
        <script src="/resources/jquery-1.11.3.min.js"></script>
        <script src="/resources/jquery-ui-1.11.4/jquery-ui.min.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="/resources/themes/<!-- Theme -->/easyui.css">
        <link rel="stylesheet" type="text/css" href="/resources/themes/icon.css">
        <link rel="stylesheet" type="text/css" href="/resources/themes/jquery.dataTables.min.css">
        <script type="text/javascript" src="/resources/jquery.easyui.min.js"></script>
        <script type="text/javascript" src="/resources/datagrid-detailview.js"></script>
        <script type="text/javascript" src="/resources/datagrid-scrollview.js"></script>
<style>
    html{
        height: 100%;
    }

    body {
        min-height: 100%;
        margin: 0px;
    }
</style>
</head>
    <body>
        <div id="action_tabs" class="easyui-tabs" style="height:100%;min-height:100%;">
            <div title="New" style="padding:10px;">
                <h2 align="center" style="width:100%;margin:auto">New Action</h2>
                <table cellpadding="5" style="margin:auto;">
                    <tr>
                        <td>Plugin:</td>
                        <td>
                            <select class="easyui-combobox" name="language" style="width:100%;"><option value="ar">Hash</option><option value="bg">Star</option><option value="ca">Catalan</option><option value="zh-cht">Chinese Traditional</option><option value="cs">Czech</option><option value="da">Danish</option><option value="nl">Dutch</option><option value="en">English</option><option value="et">Estonian</option><option value="fi">Finnish</option><option value="fr">French</option><option value="de">German</option><option value="el">Greek</option><option value="ht">Haitian Creole</option><option value="he">Hebrew</option><option value="hi">Hindi</option><option value="mww">Hmong Daw</option><option value="hu">Hungarian</option><option value="id">Indonesian</option><option value="it">Italian</option><option value="ja">Japanese</option><option value="ko">Korean</option><option value="lv">Latvian</option><option value="lt">Lithuanian</option><option value="no">Norwegian</option><option value="fa">Persian</option><option value="pl">Polish</option><option value="pt">Portuguese</option><option value="ro">Romanian</option><option value="ru">Russian</option><option value="sk">Slovak</option><option value="sl">Slovenian</option><option value="es">Spanish</option><option value="sv">Swedish</option><option value="th">Thai</option><option value="tr">Turkish</option><option value="uk">Ukrainian</option><option value="vi">Vietnamese</option></select>
                        </td>
                    </tr>
                    <tr>
                        <td>Sort Term:</td>
                        <td>
                            <select class="easyui-combobox" name="language" style="width:100%;"><option value="ar">Filename</option><option value="bg">Ext</option><option value="ca">Path</option><option value="zh-cht">Source Short</option><option value="cs">Czech</option><option value="da">Danish</option><option value="nl">Dutch</option><option value="en">English</option><option value="et">Estonian</option><option value="fi">Finnish</option><option value="fr">French</option><option value="de">German</option><option value="el">Greek</option><option value="ht">Haitian Creole</option><option value="he">Hebrew</option><option value="hi">Hindi</option><option value="mww">Hmong Daw</option><option value="hu">Hungarian</option><option value="id">Indonesian</option><option value="it">Italian</option><option value="ja">Japanese</option><option value="ko">Korean</option><option value="lv">Latvian</option><option value="lt">Lithuanian</option><option value="no">Norwegian</option><option value="fa">Persian</option></select>
                        </td>
                    </tr>
                    <tr>
                        <td>Sort Order:</td>
                        <td>
                            <select class="easyui-combobox" name="language" style="width:100%;"><option value="asc">Ascending</option><option value="desc">Descending</option></select>
                        </td>
                    </tr>
                    <tr>
                        <td>All:</td>
                        <td><input id="all" type="checkbox"></td>
                        <!-- <input id="justified" type="checkbox" onclick="setTabs()"> -->
                    </tr>
                    <tr>
                        <td>Size:</td>
                        <td><input class="easyui-numberspinner" value="100" data-options="increment:10" style="width:100%;height:26px;"></td>
                    </tr>
                </table>
                <div style="text-align:center;padding:5px">
                    <a href="javascript:void(0)" class="easyui-linkbutton" onclick="submitForm()">Submit</a>
                    <a href="javascript:void(0)" class="easyui-linkbutton" onclick="clearForm()">Clear</a>
                </div>
            </div>
                <div title="Active" style="padding:10px">
                    <p>Click the button below to show progress information.</p>
                    <div style="margin:20px 0;">
                        <a href="#" class="easyui-linkbutton" onclick="start()">Start</a>
                    </div>
                    <div id="p" class="easyui-progressbar" style="width:400px;"></div>
                    <script>
                        function start(){
                            var value = $('#p').progressbar('getValue');
                            if (value < 100){
                                value += Math.floor(Math.random() * 10);
                                $('#p').progressbar('setValue', value);
                                setTimeout(arguments.callee, 200);
                            }
                        };
                    </script>
                </div>
                <div title="Done" style="padding:1px;">
                    <table class="easyui-datagrid" title="Basic DataGrid" style="width:100%;height:100%"
                            data-options="singleSelect:true,fitColumns:true">
                        <thead>
                            <tr>
                                <th data-options="field:'plugin'">Plugin Name</th>
                                <th data-options="field:'total'">Total</th>
                                <th data-options="field:'success',align:'right'">Successes</th>
                                <th data-options="field:'failed',align:'right'">Failures</th>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>
    <script type="text/javascript">
            $('#action_tabs').tabs({
                justified: true,
                narrow: true,
                plain: true,
                fit: true,
                height: '100%'});

            /*$('#tl01').datagrid({loadMsg:''});

            function formatLinkUrl(val,row){
                if (row.meta_type == 'Directory') {
                    var url = '/plugins/fa_browser<!-- Query -->&'+ jQuery.param({pathspec: row.pathspec});
                    return '<a href="'+url+'" target="_self">Navigate</a>';
                }
                else {
                    var url = '/plugins/fa_analyze?'+ jQuery.param({pathspec: row.pathspec, index: row.index});
                    return '<a href="'+url+'" target="timeline_frame">Open</a>';
                }
            }

            $(function(){
                $('#tl01').datagrid({
                    detailFormatter: function(rowIndex, rowData){
                        console.log(rowData)
                        return "<div id='details_" + rowIndex +
                            "'>Loading...<\/div><script type=\"text/javascript\">$.get('/plugins/fa_timeline?method=details&"
                             + jQuery.param({id: rowData.uuid}) + "&index=<!-- Index -->', function(data) { $('#details_" + rowIndex +
                            "').html(data); })<\/script>"
                    }
                });
            });

            function formatThumbnail(val,row){
                var test = JSON.stringify(row.pathspec)
                var url = '/plugins/fa_thumbnail?'+ jQuery.param({pathspec: row.pathspec});
                return '<img style="height:32px;width:32px;" src="'+url+'" alt="Thumbnail">';
            }

            bookmark_version = 0
            if (typeof(Storage) !== "undefined") {
                if (localStorage.getItem("fa_star_version") === null) {
                    localStorage.setItem("fa_star_version", 0);
                }

                // Store
                bookmark_version = localStorage.getItem("fa_star_version");
            }

            $(window).bind('storage', function (e) {
                // Retrieve
                new_bookmark_version = localStorage.getItem("fa_star_version");

                if (new_bookmark_version != bookmark_version)
                {
                    bookmark_version = new_bookmark_version;
                    setTimeout(function() {
                        $('#tl01').datagrid("load");
                    }, 2000);
                }
            });

            function toggleStar(index, id) {
                console.log('toggle started');
                $.get('/plugins/fa_togglestar?index=' + index + '&id=' + id, function(data) {
                    var json_data = JSON.parse(data)
                    $('#' + json_data.img_id).attr('src', json_data.img);
                    console.log('Found: ' + json_data.img);
                    if (typeof(Storage) !== "undefined") {
                        if (localStorage.getItem("fa_star_version") === null) {
                            localStorage.setItem("fa_star_version", 0);
                        }
                        else {
                            // Store
                            localStorage.setItem('fa_star_version', (Number(localStorage.getItem('fa_star_version')) + 1) % 10000);
                        }
                    }
                    console.log('version: ' + (localStorage.getItem('fa_star_version') + 1));
                })
                return false;
            }*/
    </script>
    </body>
</html>
